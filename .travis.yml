sudo: required
language: generic
matrix:
  include:
  - os: osx
    osx_image: xcode9.2
    language: generic
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
  - os: osx
    osx_image: xcode9.2
    language: generic
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=coverage
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=7
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=debug
    - BUILD_ARCHITECTURE=x86_64
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=release
    - BUILD_ARCHITECTURE=x86
    - GCC_VERSION=6
  - os: linux
    dist: trusty
    env:
    - BUILD_CONFIG=zpm
    - GCC_VERSION=6
global:
  env:
  - PROJECT=Preproc
  - PROJECT_DIRECTORY=preproc
install:
- source /dev/stdin <<< "$(curl -s https://raw.githubusercontent.com/Zefiros-Software/ZPM/dev/script/install-zpm.sh)"
script:
- zpm run build-ci-library
after_success:
- zpm run deploy-ci-library
notifications:
  slack:
    secure: kATDWFfsFloS84hxtY5/rKOH67ZlUAjpX+xuYP5rrJfxRvFr8ALGmmB9C4B/5+QqZnbSgmV5F6TWW1IZZ7L8EfkfxVWjAX5hc2dt7X77IpEgU6Cpg9hFsXUJvyLyfpX8eQNtz8Mv8CrJ/sHWi1588EDKBKWcI0OIUAsrdBPw9MD2hggOkScjOCpOI0Ztz2JMibnSwkwBJcxDAUmROWwOqTMWeN1TWJ41n4J6v8DpqrXV5prz89a2mw4+SpYLbzyH82yTZuKovd2tqMP/Oe8qK7OU6+h0by0cI52Wtgvi3kpbClhnxidxGFnEdXAAe1m4YT9GZMDNJlgEXvuvX0MLOUxjZPnal5BoqAnfXbb46Fwu7g2mmIKXuP9yq/nulm+B41ONDemgowi9k0v1lNq2HbcImqZ6P30hF1FtZjMCygXhLqsjnjtjHrZGAlWsRXT6hXdxxkCLT9S2y3irzTSe+7xOoIeML0iuQM/hgldvztgVj7wmDrw15hWE/hUjRSSKxIGTdQU6frGkLHtaYlX96QbLHn9aoUeF9xKnWQlSrrF0a4Jv19fSLZrP/UEanK304lcq49jUuiOhR4QohTWTCDM24pHqIb1l0+PrFwGGCpQbJf345duL+tbSMRfoqMDgjpm3cQ5UfSMiy8ek9r8RNIMFdoi5o84HoJF1wV+F0eY=
